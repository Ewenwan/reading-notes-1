# C#高效编程
改进C#代码的50个行之有效的办法

# 参考
[浅墨] 【《Effective C#》提炼总结】提高Unity中C#代码质量的22条准则
http://www.manew.com/thread-98707-1-1.html

# 重点


# xmind

C#高效编程
改进C#代码的50个行之有效的办法
	1 使用属性而不是可访问的数据成员
		优势
			暴露数据成员
			封装
		特性
			隐式属性语法
				C# 3.0
			易于添加多线程支持对数据的同步访问
			可以为getter/setter指定不同的访问权限
		实用例子
			定义在泛型接口中
			创建索引器，暴露出可索引的项目
				一维or多维
				不同类型
				支持只读or读写
				支持virtual&abstract
				不支持隐式
				必须命名为this
					防止混淆需要不同的参数列表
		原理
			作为两个独立的方法被编译到类型中
				拥有方法的所有语言特性
					virtual
					abstract 定义在接口中
		注意
			如果把数据成员改成属性，需要重新编译所有用到该数据成员的代码
				原因
					源码层次兼容，二进制层面不同
					属性的访问和数据的访问会生成不同的MSIL（Microsoft Intermediate Language 微软中间语言）指令
				后果
					更新单个程序集时，需要更新整个应用程序
					无法更新单一程序集
					破坏了二进制兼容性
		性能
			相差一次函数调用，很小
			JIT编译器内联方法调用时一致
			极端情况下有差距
				？
			调用者有一定预期
				不应执行长时间的计算
				不应进行跨应用程序的调用
					DB查询
				其他与期待不符的耗时操作
		建议
			无论何时在类型的公有or保护接口中需要暴露数据，都应使用属性
			应该使用索引器来暴露序列or字典
			所有数据成员都应该是私有的
				没有例外
					利于今后进行数据绑定
	2 使用运行时常量(readonly)而不是编译器常量(const)